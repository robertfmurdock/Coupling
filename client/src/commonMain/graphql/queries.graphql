fragment PartyDetailsFragment on PartyDetails {
    id
    name
    email
    pairingRule
    badgesEnabled
    defaultBadgeName
    alternateBadgeName
    callSignsEnabled
    animationsEnabled
    animationSpeed
    modifyingUserEmail
    timestamp
    isDeleted
}

query partyListQuery {
    partyList { details {...PartyDetailsFragment}}
}

query partyQuery($partyId: PartyId!) {
    party(input: {partyId: $partyId}) { details {...PartyDetailsFragment}}
}

query partySecretsPageQuery($partyId: PartyId!) {
    party(input: {partyId: $partyId}) {
        details {...PartyDetailsFragment}
        secretList {
            ...PartySecretFragment
        }
        boost {
            ...BoostDetailsFragment
        }
    }
}

fragment PartySecretFragment on PartySecret {
    id
    partyId
    description
    createdTimestamp
    lastUsedTimestamp
}

fragment BoostDetailsFragment on BoostDetails {
    userId
    partyIds
    expirationDate
}

query userQuery {
    user {
        details {
            ...UserDetailsFragment
        }
    }
}

query userPageQuery {
    user {
        details {
            ...UserDetailsFragment
        }
    }
    partyList {
        details {
            ...PartyDetailsFragment
        }
    }
}

query prereleaseUserPageQuery {
    user {
        details {
            ...UserDetailsFragment
        }
        subscription {
            stripeCustomerId
            stripeSubscriptionId
            isActive
            currentPeriodEnd
        }
        boost {
            userId
            partyIds
            expirationDate
        }
    }
    config {
        stripeAdminCode
        stripePurchaseCode
    }
    partyList {
        details {
            ...PartyDetailsFragment
        }
    }
}

fragment UserDetailsFragment on UserDetails {
    id
    email
    connectSecretId
    connectedEmails
    authorizedPartyIds
}

query contributionVisualizationPageQuery($partyId: PartyId!) {
    party(input: {partyId: $partyId}) {
        details { ...PartyDetailsFragment }
        spinsUntilFullRotation
    }
}

query contributionVisualizationDataQuery($partyId: PartyId!, $window: ContributionWindow!, $pairsInput: PairsInput!) {
    party(input: {partyId: $partyId}) {
        pairs(input: $pairsInput) {
            players {
                ...PlayerDetailsFragment
            }
            contributionReport(input: {window: $window}) {
                contributions {
                    ...PartyContributionFragment
                }
                medianCycleTime
                withCycleTimeCount
            }
        }
    }
}

query contributionListPageQuery($partyId: PartyId!, $window: ContributionWindow!) {
    party(input: {partyId: $partyId}) {
        details { ...PartyDetailsFragment }
        playerList { ...PlayerDetailsFragment }
        retiredPlayers { ...PlayerDetailsFragment }
        contributionReport(input: {window: $window}) {
            contributions { ...ContributionFragment }
        }
    }
}

fragment PlayerDetailsFragment on PlayerDetails {
    id
    name
    email
    badge
    callSignAdjective
    callSignNoun
    imageURL
    avatarType
    unvalidatedEmails
}

fragment ContributionFragment on Contribution {
    commitCount
    createdAt
    cycleTime
    dateTime
    ease
    firstCommit
    firstCommitDateTime
    hash
    id
    integrationDateTime
    label
    link
    name
    participantEmails
    semver
    story
}

fragment PartyContributionFragment on Contribution {
    commitCount
    createdAt
    cycleTime
    dateTime
    ease
    firstCommit
    firstCommitDateTime
    hash
    id
    integrationDateTime
    label
    link
    name
    participantEmails
    semver
    story
    partyId
    modifyingUserEmail
    timestamp
    isDeleted
}
